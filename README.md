## Задача
Номер 31

8 Пользовательские типы данных

4 тип double

Умножение матрицы на вектро

## Описание
Я выбрала задачу умножения матрицы на вектор, так как данный паттерн, мне показалось, больше всего подходит именно для этой задачи, потому что с помощью него можно задать целый блок матрицы, что позволяет эффективнее работать с ними.

Реализована программа умножающая матрицу 8х8 на вектор с использованием MPI. В данной программе умножение со следующими матрицой и вектором.

```
[ 1  2  3  4  5  6  7  8 ] [1]

[ 9 10 11 12 13 14 15 16 ] [2]

[17 18 19 20 21 22 23 24 ] [3]

[25 26 27 28 29 30 31 32 ] [4]

[33 34 35 36 37 38 39 40 ] [5] 

[41 42 43 44 45 46 47 48 ] [6]

[49 50 51 52 53 54 55 56 ] [7]

[57 58 59 60 61 62 63 64 ] [8]
```

Процесс 0 создает полную матрицу и вектор. Остальные процессы получают свои строки матрицы. Каждый процесс умножает их на вектор.

Для этого создан пользовательский тип данных для (8/кол-во процессов) строк по 8 элементов. 

```
MPI_Type_vector(block_size, 8, 8, MPI_DOUBLE, &block_type);
```
, где block_size = 8/кол-во процессов.

Таким образом, отправляем на каждый процесс сразу блок матрицы одной операцией. Без него надо было бы копировать строки в буфер или отправлять каждую отдельно.

MPI_Gather собирает все частичные результаты на процесс 0 и формируется полный результат умножения.

```bash
# Собрать (по умолчанию 8 потоков)
make 

# Собрать (2 потока)
make make2

# Собрать (4 потока)
make make4

# Собрать (8 потоков)
make make8

# Очистить
make clean
```

Кроме того можно собрать с указанием количества потоков (N):

```
mpic++ main.cpp -o main
mpiexec -n N ./main
```
